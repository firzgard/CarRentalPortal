@model CRP.Models.ViewModels.VehicleGroupViewModel
@{
    ViewBag.Title = "Quản lý nhóm giá";
    Layout = "~/Views/Shared/_ManagementLayout.cshtml";
}

<div class="row wrapper border-bottom white-bg page-heading">
    <div class="col-md-10"><h2>Quản lý nhóm giá</h2></div>
</div>
<div class="wrapper wrapper-content animated fadeInRight">
    <div class="col-lg-12">
        <div class="ibox float-e-margins">
            <div class="ibox-content">
                <div class="ibox ibox-content float-e-margins">
                        @Html.HiddenFor(q => q.ID, new { @id= "groupID" } )
                        @Html.HiddenFor(q => q.IsActive, new { @id= "isActive" } )
                        <div class="row form-group">
                            <div class="col-md-12">
                                <div class="input-group">
                                    <span class="input-group-addon"><i class="fa fa-building-o"></i></span>
                                    @Html.TextBoxFor(q => q.Name, new { @id= "groupName", @class = "form-control input-lg" , @placeholder = "Tên nhóm", required = true })
                                </div>
                            </div>
                        </div>
                        <div class="row form-group">
                            <div class="col-md-7">
                                <div class="form-group">
                                    <label for="MaxRental">Kỳ hạn thuê tối đa</label>
                                    <div class="input-group m-b boxForm text-center">
                                        @Html.TextBoxFor(q => q.PriceGroup.MaxRentalPeriod, new { @type="number", @class = "form-control", required = true}) <span class="input-group-addon">ngày</span>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label>Đặt cọc</label>
                                    <div class="input-group m-b boxForm text-center">
                                        @Html.HiddenFor(q => q.PriceGroup.DepositPercentage, new { @id = "deposit" })
                                        <input type="text" id="depositDisplay" class="form-control" required/><span class="input-group-addon">%</span>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label>Giá theo ngày</label>
                                    <div class="input-group m-b boxForm text-center">
                                        @Html.TextBoxFor(q => q.PriceGroup.PerDayPrice, new { @class = "form-control", required = true}) <span class="input-group-addon">₫</span>
                                    </div>
                                </div>

                            </div>
                            <div class="col-md-5">
                                <div class="form-group">
                                    <div class="pull-right">
                                        <button type="button" class="btn btn-primary btn-number plus-btn" data-type="plus">
                                            <i class="fa fa-plus"></i> Thêm hàng mới
                                        </button>
                                    </div>
                                    <h2>Bảng giá theo giờ</h2>
                                    <table class="table table-striped table-bordered table-hover " id="priceGroupItem"></table>
                                </div>
                            </div>
                        </div>
                        <div>
                            <div class="btn-group">
                                <button id="activationBtn" class="btn btn-warning" data-toggle="modal" data-target="#customModal"></button>
                                <button class="btn btn-primary pull-right">Lưu thay đổi</button>
                            </div>
                        </div>
                </div>
            </div>
        </div>
    </div>
    <div class="ibox ibox-content float-e-margins">
        <button id="listAdd" data-toggle="modal" data-target="#modalAdd" class="btn btn-success pull-right" style="margin-bottom: 1em;">
            <i class="fa fa-plus"></i> Thêm xe vào nhóm
        </button>
        <table class="table table-striped table-bordered table-hover" width="100%" id="vehicles">
        </table>
    </div>
</div>
<div class="modal fade" id="customModal" tabindex="-1" role="dialog"></div>


<style>
    .select2-dropdown {  
      z-index: 10060 !important;/*1051;*/
    }
</style>
<div id="modalAdd" class="modal fade" role="dialog">
    <div class="modal-dialog modal-lg">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Thêm xe vào nhóm này</h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-offset-1 col-md-2">
                        <label>Vui lòng chọn xe</label>
                    </div>
                    <div class="col-md-8">
                        @Html.DropDownListFor(q => q.vehicleID, this.Model.listVehicle, new { @class = "form-control", @id = "drpVehicle" })
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Đóng</button>
                <button id="btnAddVehicle" class="btn btn-primary" type="button">Thêm</button>
            </div>
        </div>

    </div>
</div>

<div id="changeGroup" class="modal fade" role="dialog">
    <div class="modal-dialog modal-lg">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Đổi nhóm cho xe này</h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-offset-1 col-md-2">
                        <label>Vui lòng chọn nhóm</label>
                    </div>
                    <div class="col-md-8">
                        <input type="hidden" id="v-id" />
                        @Html.DropDownListFor(q => q.otherGroupID, this.Model.listGroup, new { @class = "form-control", @id = "drpGroup" })
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Đóng</button>
                <button id="btnChangeGroup" class="btn btn-primary" type="button">Đồng ý</button>
            </div>
        </div>

    </div>
</div>
<div id="deleteFromGroup" class="modal fade" role="dialog">
    <div class="modal-dialog modal-lg">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Xóa xe khỏi nhóm này</h4>
            </div>
            <div class="modal-body">
                <input type="hidden" id="v-id" />
                Bạn có chắc chắn xóa xe <span id="vehicle-name"></span> khỏi nhóm này?
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Đóng</button>
                <button id="btnDeleteVehicleFromGroup" class="btn btn-primary" type="button">Đồng ý</button>
            </div>
        </div>

    </div>
</div>

@{ BundleTable.Bundles.Add(new StyleBundle("~/Styles/VehicleGroupDetail")
                                          .Include("~/Content/awesome-bootstrap-checkbox.css",
                                              "~/Content/select2/select2.min.css",
                                              "~/Content/DataTables/css/dataTables.bootstrap.css",
                                              "~/Content/pageStyle/vehicleGroup.css"));
}
@section Styles {
    @Styles.Render("~/Styles/VehicleGroupDetail")
}
@{ BundleTable.Bundles.Add(new ScriptBundle("~/Scripts/VehicleGroupDetail")
                                           .Include("~/Scripts/select2/select2.full.min.js",
                                              "~/Scripts/DataTables/jquery.dataTables.js",
                                              "~/Scripts/DataTables/dataTables.bootstrap.js",
                                              "~/Scripts/utils/customModals.js",
                                              "~/Scripts/utils/generateUIElements.js",
                                              "~/Scripts/utils/generateCustomDataTablesFilters.js",
                                              "~/Scripts/pageScript/vehicleGroup.js"));
}
@section Scripts {
    @Scripts.Render("~/Scripts/VehicleGroupDetail")
}